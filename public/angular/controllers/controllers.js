var TheControllers=angular.module("TheControllers",["recipeService"]);angular.module("TheControllers").directive("ngEnter",function(){return function(e,n,t){n.bind("keydown keypress",function(n){13===n.which&&(e.$apply(function(){e.$eval(t.ngEnter,{event:n})}),n.preventDefault())})}}),TheControllers.controller("SearchController",["$scope","$http","detailsService",function(e,n,t){e.chosen_ingredients=[],e.recipes=[],e.dataArray=[],e.query_result=[],e.match="",e.reset=function(){e.match="",e.query_result.length=0},e.insert=function(n){e.chosen_ingredients.push({name:n}),e.displayRecipes(),e.reset()},e.queryIngredients=function(t){var r="/api/ingredients/",i={ingredient:t};n.post(r,i).success(function(n){e.query_result=n})},e.switchAndDisplay=function(n){e.chosen_ingredients.push(n),e.displayRecipes(),e.reset()},e.remove=function(n){e.chosen_ingredients.splice(n,1),e.displayRecipes()},e.details=function(r,i){n.get("http://api.yummly.com/v1/api/recipe/"+e.dataArray[i].id+"?_app_id=af791dca&_app_key=f28b1240c0ab4435b41d6505f0278cfd").success(function(e){t.setName(e),console.log(e),console.log(e.name),console.log(e.totalTime),console.log(e.rating)})},e.displayRecipes=function(){if(e.recipes.length=0,e.chosen_ingredients.length){var t="/api/composition/withIngredients/",r=new Array;e.chosen_ingredients.forEach(function(e){r.push(e.name)});var i={ingredients:r};n.post(t,i).success(function(n){e.dataArray=n,n.forEach(function(n){e.recipes.push({name:n.recipeName})})})}}}]),TheControllers.controller("DetailsController",["$scope","detailsService",function(e,n){e.recipeName=n.getName()}]),TheControllers.controller("AboutController",["$scope","$http",function(){}]),TheControllers.controller("InputController",["$scope","$http",function(e,n){e.test="Test",e.count="0",e.icount="0",e.ingredient=[],e.quantity=[],e.unit=[],e.instructions=[],e.userName="guest",e.recipeName="",e.inputRecipe=function(t){var r="/api/composition/new/";console.log(e.ingredient),console.log(e.quantity),console.log(e.unit);var s=new Array;for(i=0;i<e.ingredient.length;i++){var c={name:e.ingredient[i],quantity:e.quantity[i],unit:e.unit[i]};s.push(c)}console.log(s),t={name:e.recipeName,ingredients:s,instruction:e.instructions,user:e.userName},postObject=t,n.post(r,postObject).success(function(){})}}]),TheControllers.controller("ApiScrapeController",["$scope","$http",function(e,n){e.test="Test",e.currentIngredient,e.parentIngredient,n.get("/api/tmpIngredients").success(function(n){e.tmpIngredients=n}),n.get("/api/abstractIngredients").success(function(n){e.abstractIngredients=n}),e.getIngredient=function(n,t){"tempIngredient"==n?e.tmpIngredients.forEach(function(r){r.name==t&&e.setIngredient(n,r)}):"abstractIngredient"==n&&e.abstractIngredients.forEach(function(r){r.name==t&&e.setIngredient(n,r)})},e.clear=function(){e.currentIngredient="",e.ingredientName=""},e.setIngredient=function(n,t){"tempIngredient"==n?(e.currentIngredient=t,e.searchTmpIngredients=t.name,e.ingredientName=t.name):"abstractIngredient"==n&&(e.ingredientParent=t.name,e.ingredientParentId=t._id)},e.delete=function(n){if("tempIngredient"==n){alert("Can't actually delete yet, API route not implemented!"),e.currentIngredient="",e.ingredientName="",e.searchTmpIngredients="";var t="api/tmpIngredient/:"+e.ingredientId;http.delete(t).success(function(){})}else if("abstractIngredient"==n){var t="api/abstractIngredient/:"+e.parentIngredient.id;http.delete(t).success(function(){})}},e.submitNewIngredient=function(){e.currentIngredient.name=e.ingredientName,e.currentIngredient.brand=e.ingredientBrand,e.currentIngredient.parent=e.ingredientParentId,e.currentIngredient.unique=e.ingredientUnique,e.currentIngredient.processed=e.ingredientProcessed,n.post("/api/tmpIngredients",e.currentIngredient).success(function(n){e.abstractIngredients=n.abstracts,e.tmpIngredients=n.temps});var t="/api/tmpIngredients/:"+e.ingredientName;n.delete(t,e.currentIngredient).success(function(n){e.tmpIngredients=n})}}]);