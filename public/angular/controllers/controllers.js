var TheControllers=angular.module("TheControllers",["recipeService"]);angular.module("TheControllers").directive("ngEnter",function(){return function(e,n,t){n.bind("keydown keypress",function(n){13===n.which&&(e.$apply(function(){e.$eval(t.ngEnter,{event:n})}),n.preventDefault())})}}),TheControllers.controller("SearchController",["$scope","$http","$window","detailsService",function(e,n,t,i){e.chosen_ingredients=[],e.recipes=[],e.dataArray=[],e.query_result=[],e.match="",e.reset=function(){e.match="",e.query_result.length=0},e.insert=function(n){e.chosen_ingredients.push({name:n}),e.displayRecipes(),e.reset()},e.queryIngredients=function(t){var i="/api/ingredients/",r={ingredient:t};n.post(i,r).success(function(n){e.query_result=n}),n.get("http://google.com").then(function(e){console.log(e)})},e.switchAndDisplay=function(n){e.chosen_ingredients.push(n),e.displayRecipes(),e.reset()},e.remove=function(n){e.chosen_ingredients.splice(n,1),e.displayRecipes()},e.details=function(r,s){var c={recipeId:e.dataArray[s].id};n.post("/api/composition/",c).success(function(e){i.setData(e),console.log(e),r.replace(" ","%20"),t.location.href="/#/details/"+r})},e.displayRecipes=function(){if(e.recipes.length=0,e.chosen_ingredients.length){var t="/api/composition/withIngredients/",i=new Array;e.chosen_ingredients.forEach(function(e){i.push(e.name)});var r={ingredients:i};n.post(t,r).success(function(n){e.dataArray=n,n.forEach(function(n){e.recipes.push({name:n.recipeName})})})}}}]),TheControllers.controller("DetailsController",["$scope","detailsService",function(e,n){e.recipeData=n.getData(),e.timeExists=function(){return e.recipeData.totalTime?!0:!1},e.ingredientsExist=function(){return e.recipeData.ingredientLines?!0:!1},e.sourceExists=function(){return e.recipeData.source.sourceRecipeUrl?!0:!1},e.yieldExists=function(){return e.recipeData.yield?!0:!1}}]),TheControllers.controller("AboutController",["$scope","$http",function(){}]),TheControllers.controller("InputController",["$scope","$http",function(e,n){e.test="Test",e.count="0",e.icount="0",e.ingredient=[],e.quantity=[],e.unit=[],e.instructions=[],e.userName="guest",e.recipeName="",e.inputRecipe=function(t){var r="/api/composition/new/";console.log(e.ingredient),console.log(e.quantity),console.log(e.unit);var s=new Array;for(i=0;i<e.ingredient.length;i++){var c={name:e.ingredient[i],quantity:e.quantity[i],unit:e.unit[i]};s.push(c)}console.log(s),t={name:e.recipeName,ingredients:s,instruction:e.instructions,user:e.userName},postObject=t,n.post(r,postObject).success(function(){})}}]),TheControllers.controller("ApiScrapeController",["$scope","$http",function(e,n){e.test="Test",e.currentIngredient,e.parentIngredient,n.get("/api/tmpIngredients").success(function(n){e.tmpIngredients=n}),n.get("/api/abstractIngredients").success(function(n){e.abstractIngredients=n}),e.getIngredient=function(n,t){"tempIngredient"==n?e.tmpIngredients.forEach(function(i){i.name==t&&e.setIngredient(n,i)}):"abstractIngredient"==n&&e.abstractIngredients.forEach(function(i){i.name==t&&e.setIngredient(n,i)})},e.clear=function(){e.currentIngredient="",e.ingredientName=""},e.setIngredient=function(n,t){"tempIngredient"==n?(e.currentIngredient=t,e.searchTmpIngredients=t.name,e.ingredientName=t.name):"abstractIngredient"==n&&(e.ingredientParent=t.name,e.ingredientParentId=t._id)},e.delete=function(n){if("tempIngredient"==n){alert("Can't actually delete yet, API route not implemented!"),e.currentIngredient="",e.ingredientName="",e.searchTmpIngredients="";var t="api/tmpIngredient/:"+e.ingredientId;http.delete(t).success(function(){})}else if("abstractIngredient"==n){var t="api/abstractIngredient/:"+e.parentIngredient.id;http.delete(t).success(function(){})}},e.submitNewIngredient=function(){e.currentIngredient.name=e.ingredientName,e.currentIngredient.brand=e.ingredientBrand,e.currentIngredient.parent=e.ingredientParentId,e.currentIngredient.unique=e.ingredientUnique,e.currentIngredient.processed=e.ingredientProcessed,n.post("/api/tmpIngredients",e.currentIngredient).success(function(n){e.abstractIngredients=n.abstracts,e.tmpIngredients=n.temps});var t="/api/tmpIngredients/:"+e.ingredientName;n.delete(t,e.currentIngredient).success(function(n){e.tmpIngredients=n})}}]);