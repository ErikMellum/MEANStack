var ingredientController=angular.module("ingredientController",["ngEnter"]);ingredientController.controller("IngredientController",["$scope","$http",function(e,n){e.test="Test",e.currentIngredient,e.parentIngredient,n.get("/api/tmpIngredients").success(function(n){e.tmpIngredients=n}),n.get("/api/abstractIngredients").success(function(n){e.abstractIngredients=n}),e.getIngredient=function(n,t){"tempIngredient"==n?e.tmpIngredients.forEach(function(r){r.name==t&&e.setIngredient(n,r)}):"abstractIngredient"==n&&e.abstractIngredients.forEach(function(r){r.name==t&&e.setIngredient(n,r)})},e.clear=function(){e.currentIngredient="",e.ingredientName=""},e.setIngredient=function(n,t){"tempIngredient"==n?(e.currentIngredient=t,e.searchTmpIngredients=t.name,e.ingredientName=t.name):"abstractIngredient"==n&&(e.ingredientParent=t.name,e.ingredientParentId=t._id)},e.delete=function(n){if("tempIngredient"==n){alert("Can't actually delete yet, API route not implemented!"),e.currentIngredient="",e.ingredientName="",e.searchTmpIngredients="";var t="api/tmpIngredient/:"+e.ingredientId;http.delete(t).success(function(){})}else if("abstractIngredient"==n){var t="api/abstractIngredient/:"+e.parentIngredient.id;http.delete(t).success(function(){})}},e.submitNewIngredient=function(){e.currentIngredient.name=e.ingredientName,e.currentIngredient.brand=e.ingredientBrand,e.currentIngredient.parent=e.ingredientParentId,e.currentIngredient.unique=e.ingredientUnique,e.currentIngredient.processed=e.ingredientProcessed,n.post("/api/tmpIngredients",e.currentIngredient).success(function(n){e.abstractIngredients=n.abstracts,e.tmpIngredients=n.temps});var t="/api/tmpIngredients/:"+e.ingredientName;n.delete(t,e.currentIngredient).success(function(n){e.tmpIngredients=n})}}]);